
.. module:: psoap

.. _scripts:

Scripts
=======

The following scripts are made available on your command-line by the
``PSOAP`` package. Run them from your command-line prompt with the
``--help`` flag to learn more about them.

e.g.

::

    $psoap-initialize --help

The following outputs are autogenerated from an IPython notebook, so
that's why there is a ``!`` instead of a ``$`` preceeding each script
name.

Initialization
--------------

.. code:: python

    !psoap-initialize --help


.. parsed-literal::

    usage: psoap-initialize [-h] [--check] [--model {SB1,SB2,ST3}]
    
    Initialize a new directory with the necessary configuration scripts to run
    PSOAP.
    
    optional arguments:
      -h, --help            show this help message and exit
      --check               Check whether the package was installed and the
                            scripts were linked properly.
      --model {SB1,SB2,ST3}
                            Which type of model to use, SB1, SB2, ST1, or SB3.


.. code:: python

    !psoap-generate-chunks --help


.. parsed-literal::

    usage: psoap-generate-chunks [-h] [--pixels PIXELS] [--overlap OVERLAP]
                                 [--start START] [--end END]
    
    Auto-generate a chunks.dat file, which can be later edited by hand.
    
    optional arguments:
      -h, --help         show this help message and exit
      --pixels PIXELS    Roughly how many pixels per epoch should we have in each
                         chunk?
      --overlap OVERLAP  How many pixels of overlap to aim for between adjacent
                         chunks.
      --start START      Starting wavelength (AA).
      --end END          Ending wavelength (AA).


.. code:: python

    !psoap-process-chunks --help


.. parsed-literal::

    usage: psoap-process-chunks [-h] [--plot]
    
    Use the demarcated chunks in the chunks.dat to segment the dataset into new
    HDF5 chunks.
    
    optional arguments:
      -h, --help  show this help message and exit
      --plot      Make plots of the partitioned chunks.


.. code:: python

    !psoap-generate-masks --help


.. parsed-literal::

    usage: psoap-generate-masks [-h] [--sigma SIGMA]
    
    Auto-generate a comprehensive masks.dat file, which can be later edited by
    hand.
    
    optional arguments:
      -h, --help     show this help message and exit
      --sigma SIGMA  Flag a single epoch of a chunk if it contains a deviant of
                     this level.


.. code:: python

    !psoap-process-masks --help


.. parsed-literal::

    usage: psoap-process-masks [-h] [--plot]
    
    Apply the masks contained in the masks.dat file.
    
    optional arguments:
      -h, --help  show this help message and exit
      --plot      Make plots of the applied masks.


Sampling
--------

The following scripts are used in sampling the posterior distribution.

.. code:: python

    !psoap-sample --help


.. parsed-literal::

    You need to copy a config.yaml file to this directory, and then edit the values to your particular case.
    Traceback (most recent call last):
      File "/home/ian/.build/anaconda/bin/psoap-sample", line 11, in <module>
        load_entry_point('psoap==0.0.1', 'console_scripts', 'psoap-sample')()
      File "/home/ian/.build/anaconda/lib/python3.6/site-packages/pkg_resources/__init__.py", line 570, in load_entry_point
        return get_distribution(dist).load_entry_point(group, name)
      File "/home/ian/.build/anaconda/lib/python3.6/site-packages/pkg_resources/__init__.py", line 2751, in load_entry_point
        return ep.load()
      File "/home/ian/.build/anaconda/lib/python3.6/site-packages/pkg_resources/__init__.py", line 2405, in load
        return self.resolve()
      File "/home/ian/.build/anaconda/lib/python3.6/site-packages/pkg_resources/__init__.py", line 2411, in resolve
        module = __import__(self.module_name, fromlist=['__name__'], level=0)
      File "/home/ian/.build/anaconda/lib/python3.6/site-packages/psoap-0.0.1-py3.6-linux-x86_64.egg/psoap/scripts/sample.py", line 33, in <module>
        f = open("config.yaml")
    FileNotFoundError: [Errno 2] No such file or directory: 'config.yaml'


.. code:: python

    !psoap-sample-parallel --help


.. parsed-literal::

    usage: psoap-sample-parallel [-h] [--debug] run_index
    
    Sample the distribution across multiple chunks.
    
    positional arguments:
      run_index   Which output subdirectory to save this particular run, in the
                  case you may be running multiple concurrently.
    
    optional arguments:
      -h, --help  show this help message and exit
      --debug     Print out debug commands to log.log

